const response = {
  status: 200,
  url: 'https://api.github.com/user/packages/container/blog/versions?username=tomasz-galuszka',
  headers: {
    'access-control-allow-origin': '*',
    'access-control-expose-headers':
      'ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, Deprecation, Sunset',
    'cache-control': 'private, max-age=60, s-maxage=60',
    connection: 'close',
    'content-encoding': 'gzip',
    'content-security-policy': "default-src 'none'",
    'content-type': 'application/json; charset=utf-8',
    date: 'Tue, 23 Nov 2021 13:11:09 GMT',
    etag: 'W/"ffef99bc68d47908718d03dd802b379dbbcc414af68602dbcfaed93842805883"',
    'referrer-policy': 'origin-when-cross-origin, strict-origin-when-cross-origin',
    server: 'GitHub.com',
    'strict-transport-security': 'max-age=31536000; includeSubdomains; preload',
    'transfer-encoding': 'chunked',
    vary: 'Accept, Authorization, Cookie, X-GitHub-OTP, Accept-Encoding, Accept, X-Requested-With',
    'x-accepted-oauth-scopes': '',
    'x-content-type-options': 'nosniff',
    'x-frame-options': 'deny',
    'x-github-media-type': 'github.v3; format=json',
    'x-github-request-id': '0401:48B7:5173BD:A661EF:619CE86D',
    'x-oauth-scopes': 'delete:packages, repo, write:packages',
    'x-ratelimit-limit': '5000',
    'x-ratelimit-remaining': '4999',
    'x-ratelimit-reset': '1637676669',
    'x-ratelimit-resource': 'core',
    'x-ratelimit-used': '1',
    'x-xss-protection': '0'
  },
  data: [
    {
      id: 10672151,
      name: 'sha256:2e58f08dd4e0f78dd60468f6ab16080017bccd325dbe7a07a160720d1a8e6ecb',
      url: 'https://api.github.com/users/tomasz-galuszka/packages/container/blog/versions/10672151',
      package_html_url: 'https://github.com/users/tomasz-galuszka/packages/container/package/blog',
      created_at: '2021-11-22T13:44:18Z',
      updated_at: '2021-11-22T13:44:18Z',
      html_url: 'https://github.com/users/tomasz-galuszka/packages/container/blog/10672151',
      metadata: {
        package_type: 'container',
        container: {
          tags: ['latest-feature-repo-cleanup', '0.1.8-SNAPSHOT-feature-repo-cleanup']
        }
      }
    },
    {
      id: 10658418,
      name: 'sha256:029b613cddff77800888ae7c4eee91bd300f364009c126eb131a4ce401a4d2eb',
      url: 'https://api.github.com/users/tomasz-galuszka/packages/container/blog/versions/10658418',
      package_html_url: 'https://github.com/users/tomasz-galuszka/packages/container/package/blog',
      created_at: '2021-11-22T09:27:43Z',
      updated_at: '2021-11-22T09:27:43Z',
      html_url: 'https://github.com/users/tomasz-galuszka/packages/container/blog/10658418',
      metadata: {
        package_type: 'container',
        container: {
          tags: ['latest-feature-repo-cleanup', '0.1.8-SNAPSHOT-feature-repo-cleanup']
        }
      }
    },
    {
      id: 10630076,
      name: 'sha256:179069c9ff2fe0f29b318553a6f4763b6f9182d9bcdc9e0723ee2699456179ba',
      url: 'https://api.github.com/users/tomasz-galuszka/packages/container/blog/versions/10630076',
      package_html_url: 'https://github.com/users/tomasz-galuszka/packages/container/package/blog',
      created_at: '2021-11-21T15:00:51Z',
      updated_at: '2021-11-21T15:00:51Z',
      html_url: 'https://github.com/users/tomasz-galuszka/packages/container/blog/10630076',
      metadata: {
        package_type: 'container',
        container: {
          tags: ['latest-feature-repo-cleanup', '0.1.8-SNAPSHOT-feature-repo-cleanup']
        }
      }
    },
    {
      id: 10629953,
      name: 'sha256:0e7faec602030446dfaed382c06085e86a89b0d026ef8a2566654b39d55d6d67',
      url: 'https://api.github.com/users/tomasz-galuszka/packages/container/blog/versions/10629953',
      package_html_url: 'https://github.com/users/tomasz-galuszka/packages/container/package/blog',
      created_at: '2021-11-21T14:54:10Z',
      updated_at: '2021-11-21T14:54:10Z',
      html_url: 'https://github.com/users/tomasz-galuszka/packages/container/blog/10629953',
      metadata: {
        package_type: 'container',
        container: {
          tags: ['latest-feature-repo-cleanup', '0.1.8-SNAPSHOT-feature-repo-cleanup']
        }
      }
    },
    {
      id: 10629668,
      name: 'sha256:fc59de9d19f7734637cf2fc0e80d807a8716099d7b9e23b31d999f01034358bc',
      url: 'https://api.github.com/users/tomasz-galuszka/packages/container/blog/versions/10629668',
      package_html_url: 'https://github.com/users/tomasz-galuszka/packages/container/package/blog',
      created_at: '2021-11-21T14:36:25Z',
      updated_at: '2021-11-21T14:36:25Z',
      html_url: 'https://github.com/users/tomasz-galuszka/packages/container/blog/10629668',
      metadata: {
        package_type: 'container',
        container: {
          tags: ['latest-feature-repo-cleanup', '0.1.8-SNAPSHOT-feature-repo-cleanup']
        }
      }
    },
    {
      id: 10622162,
      name: 'sha256:254f1d4a9738c400b593c589c0896350324674df5044df7a660063bce9eb83f8',
      url: 'https://api.github.com/users/tomasz-galuszka/packages/container/blog/versions/10622162',
      package_html_url: 'https://github.com/users/tomasz-galuszka/packages/container/package/blog',
      created_at: '2021-11-21T08:52:26Z',
      updated_at: '2021-11-21T08:52:26Z',
      html_url: 'https://github.com/users/tomasz-galuszka/packages/container/blog/10622162',
      metadata: {
        package_type: 'container',
        container: {
          tags: ['latest-feature-repo-cleanup', '0.1.8-SNAPSHOT-feature-repo-cleanup']
        }
      }
    },
    {
      id: 10622107,
      name: 'sha256:cee006fe1fd363169b26b16700c17aa86b92f1d1b0b7d8583be1d80f1a28d7af',
      url: 'https://api.github.com/users/tomasz-galuszka/packages/container/blog/versions/10622107',
      package_html_url: 'https://github.com/users/tomasz-galuszka/packages/container/package/blog',
      created_at: '2021-11-21T08:46:36Z',
      updated_at: '2021-11-21T08:46:36Z',
      html_url: 'https://github.com/users/tomasz-galuszka/packages/container/blog/10622107',
      metadata: {
        package_type: 'container',
        container: {
          tags: ['latest-feature-repo-cleanup', '0.1.8-SNAPSHOT-feature-repo-cleanup']
        }
      }
    },
    {
      id: 10621964,
      name: 'sha256:534ab56022345afe69f7cb64b10dd6035d6da0c2a544cb70ff8aa36dbb33bbc1',
      url: 'https://api.github.com/users/tomasz-galuszka/packages/container/blog/versions/10621964',
      package_html_url: 'https://github.com/users/tomasz-galuszka/packages/container/package/blog',
      created_at: '2021-11-21T08:34:14Z',
      updated_at: '2021-11-21T08:34:14Z',
      html_url: 'https://github.com/users/tomasz-galuszka/packages/container/blog/10621964',
      metadata: {
        package_type: 'container',
        container: {
          tags: ['latest-feature-repo-cleanup', '0.1.8-SNAPSHOT-feature-repo-cleanup']
        }
      }
    }
  ]
}

function run() {
  try {
    const containersSortedList = response.data.sort((a, b) => {
      return new Date(b.updated_at) - new Date(a.updated_at)
    })

    const containerListForRemoval = containersSortedList.filter((container) => {
      const tags = container.metadata.container.tags
      let isNotImportant = false
      for (let i = 0; i < tags.length; i++) {
        const tag = tags[i]
        if (tag.includes('feature') || tag.includes('release')) {
          isNotImportant = true
          break
        }
      }
      return tags.length > 0 && isNotImportant
    })

    console.log(`All containers size: ${containersSortedList.length}`)
    console.log(`Containers to remove size: ${containerListForRemoval.length}`)

    containerListForRemoval.forEach((container) => {
      console.log(`Deleted aaa with id: ${container.id}, ${container.metadata.container.tags}`)
    })
  } catch (error) {
    console.log('Error occurred')
    console.log(error.message)
  }
}
run()
